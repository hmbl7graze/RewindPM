# RewindPM UI/UX MVP仕様書

## デザイン方針

**ベンチマーク: GitHub**
- GitHubのプロジェクト管理機能をイメージしたUI/UX
- シンプルで直感的な操作性
- モダンなカード型レイアウト
- 暗いテーマと明るいテーマの両対応（将来）

**基本原則:**
- **ミニマリスト:** 必要な情報だけを表示し、視覚的ノイズを削減
- **フィードバック:** ユーザーの操作に即座に反応
- **一貫性:** コンポーネントの見た目と動作を統一
- **レスポンシブ:** 画面サイズに応じた適切な表示

---

## 画面構成

### 1. ホーム画面（プロジェクト一覧）

**レイアウト:**
```
┌─────────────────────────────────────────────┐
│ RewindPM                    [+ New Project] │
├─────────────────────────────────────────────┤
│                                             │
│  ┌─────────────┐  ┌─────────────┐         │
│  │ Project A   │  │ Project B   │         │
│  │             │  │             │         │
│  │ Description │  │ Description │         │
│  │             │  │             │         │
│  │ 5 Tasks     │  │ 3 Tasks     │         │
│  │ 2 Completed │  │ 1 Completed │         │
│  └─────────────┘  └─────────────┘         │
│                                             │
└─────────────────────────────────────────────┘
```

**機能:**
- プロジェクト一覧をカード形式で表示
- 各プロジェクトカードに表示する情報：
  - プロジェクト名
  - 説明（最初の2行程度）
  - タスク数と完了タスク数のサマリ
- カードクリックでプロジェクト管理画面に遷移
- [+ New Project]ボタンでプロジェクト作成モーダルを表示

**プロジェクト作成モーダル:**
- プロジェクト名（必須、最大200文字）
- 説明（任意、マルチライン）
- [作成] [キャンセル] ボタン

---

### 2. プロジェクト管理画面

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ ← Back to Projects    Project Name         [Edit] [Add] │
├──────────────────────────────────────────────────────────┤
│ Description: プロジェクトの説明...                        │
├──────────────────────────────────────────────────────────┤
│                                                          │
│ Timeline: [◀] 2024/01/15 [▶]         [📅 Today]        │
│                                                          │
├──────────────────────────────────────────────────────────┤
│                   Gantt Chart View                       │
│                                                          │
│ Task Name       |────予定────|                          │
│                 |──実績──|                              │
│                                                          │
│ Task B          |────予定────|                          │
│                 |────実績────────|                      │
│                                                          │
│ Task C          |────予定────|                          │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

**ヘッダー部:**
- 左: [← Back to Projects] リンク
- 中央: プロジェクト名
- 右: [Edit Project] [Add Task] ボタン

**プロジェクト情報表示:**
- プロジェクト名（大きく表示）
- 説明（展開可能）

**タイムラインコントロール:**
- [◀] 前の編集日へ移動
- 日付表示（YYYY/MM/DD形式）
- [▶] 次の編集日へ移動（過去表示中のみ有効）
- [📅 Today] 現在に戻るボタン（過去表示中のみ表示）

**ガントチャート表示:**
- タスク一覧を時系列で表示
- 各タスクに予定期間（薄い色）と実績期間（濃い色）を表示
- タスクをクリックすると詳細モーダルを表示
- ステータス別に色分け（将来実装）

**過去表示モード:**
- 背景色を変更（例: 薄いグレー）して過去表示を明示
- すべての編集ボタンを無効化
- 「過去の状態を表示中」という通知バナーを表示

---

### 3. タスク詳細モーダル

**レイアウト:**
```
┌─────────────────────────────────────────┐
│ Task Details                      [×]   │
├─────────────────────────────────────────┤
│                                         │
│ Title: [タスク名                    ]  │
│                                         │
│ Description:                            │
│ [複数行のテキストエリア            ]   │
│                                         │
│ Status: [TODO ▼]                       │
│                                         │
│ Scheduled Period:                       │
│   Start: [2024/01/10]  End: [2024/01/15]│
│   Estimated Hours: [20]                 │
│                                         │
│ Actual Period:                          │
│   Start: [2024/01/11]  End: [2024/01/16]│
│   Actual Hours: [25]                    │
│                                         │
│              [Save] [Delete] [Cancel]   │
└─────────────────────────────────────────┘
```

**新規作成時:**
- Title（必須）
- Description（任意）
- Status（デフォルト: TODO）
- Scheduled Period（任意）
- Actual Periodは非表示

**編集時:**
- 全フィールドを表示
- 削除ボタンを表示
- ステータスをドロップダウンで変更可能

**過去表示モード:**
- 全フィールドを読み取り専用で表示
- 保存・削除ボタンを非表示

---

## コンポーネント設計

### ページコンポーネント

```
Pages/
├─ Projects/
│   ├─ Index.razor              # プロジェクト一覧
│   ├─ Create.razor             # プロジェクト作成モーダル（または別コンポーネント）
│   ├─ Detail.razor             # プロジェクト管理画面
│   └─ Edit.razor               # プロジェクト編集モーダル
└─ Tasks/
    ├─ Detail.razor             # タスク詳細モーダル
    └─ Create.razor             # タスク作成モーダル
```

### 共通コンポーネント

```
Components/
├─ Layout/
│   ├─ MainLayout.razor         # 全体レイアウト
│   └─ NavMenu.razor            # ナビゲーション（将来）
├─ Shared/
│   ├─ Modal.razor              # 汎用モーダル
│   ├─ Button.razor             # 統一されたボタンスタイル
│   └─ Card.razor               # プロジェクトカード
├─ Timeline/
│   ├─ TimelineControl.razor    # タイムラインコントロール（◀日付▶）
│   └─ PastModeIndicator.razor  # 過去表示モード通知バナー
└─ Tasks/
    ├─ GanttChart.razor         # ガントチャート表示
    ├─ TaskRow.razor            # ガントチャートの1行
    └─ TaskCard.razor           # タスクカード（将来のカンバンビュー用）
```

---

## インタラクション設計

### 1. プロジェクト作成フロー

1. ホーム画面で[+ New Project]をクリック
2. モーダルが開く（アニメーション付き）
3. プロジェクト名と説明を入力
4. [作成]をクリック
5. バリデーション実施
   - プロジェクト名が空の場合：エラー表示
   - 成功：モーダルを閉じ、新しいプロジェクトカードを追加表示
6. 作成完了のトースト通知（3秒後に消える）

### 2. タスク作成フロー

1. プロジェクト管理画面で[Add Task]をクリック
2. タスク詳細モーダルが開く（新規作成モード）
3. タスク名、説明、予定期間などを入力
4. [Save]をクリック
5. バリデーション実施
   - タスク名が空の場合：エラー表示
   - 終了日が開始日より前：エラー表示
   - 成功：モーダルを閉じ、ガントチャートに新しいタスクを表示
6. 作成完了のトースト通知

### 3. タスク編集フロー

1. ガントチャートでタスクをクリック
2. タスク詳細モーダルが開く（編集モード）
3. 必要な項目を編集
4. [Save]をクリック
5. バリデーション実施
6. 成功：モーダルを閉じ、ガントチャートの表示を更新
7. 更新完了のトースト通知

### 4. リワインド機能の操作

**初期状態（今日の表示）:**
- [◀]ボタン: 有効
- 日付表示: 今日の日付
- [▶]ボタン: 無効（グレーアウト）
- [📅 Today]ボタン: 非表示

**過去表示モード:**
1. [◀]をクリック
2. 前回編集した日の最後の状態にジャンプ
   - 日付表示が更新される
   - 背景色が変わる
   - 「過去の状態を表示中」バナーが表示される
   - すべての編集ボタンが無効化される
   - [▶]ボタンが有効になる
   - [📅 Today]ボタンが表示される
3. さらに[◀]で前の編集日へ移動可能
4. [▶]で次の編集日へ移動
5. [📅 Today]で現在に戻る
   - 背景色が元に戻る
   - バナーが消える
   - 編集ボタンが有効になる
   - [▶]ボタンが無効になる
   - [📅 Today]ボタンが非表示になる

**重要な仕様:**
- 同じ日に複数回編集された場合、その日の最後の状態のみを表示
- 編集がない日はスキップされる
- 過去表示中はタスクの閲覧のみ可能（編集・削除・作成不可）

---

## データ表示仕様

### タスクのプロパティ表示

**必須フィールド:**
- タスクID（自動採番、UI上は非表示）
- タスク名（最大200文字）
- プロジェクトID（UI上は非表示、内部で管理）

**任意フィールド:**
- 説明（マルチライン、最大5000文字）
- ステータス（TODO / 進行中 / レビュー中 / 完了）
- 予定期間（開始日、終了日、予定工数）
- 実績期間（開始日、終了日、実績工数）

**将来対応:**
- 担当者
- 優先度
- 進捗率

### 日付・時刻の表示形式

- 日付: `YYYY/MM/DD` 形式（例: 2024/01/15）
- 工数: 時間単位（例: 20h）
- タイムスタンプ: `YYYY/MM/DD HH:mm` 形式（詳細表示時）

### ステータスの色分け

- **TODO:** グレー `#6c757d`
- **進行中:** ブルー `#0d6efd`
- **レビュー中:** イエロー `#ffc107`
- **完了:** グリーン `#28a745`

---

## バリデーションルール（UI層）

### プロジェクト作成・編集

- プロジェクト名: 必須、1-200文字
- 説明: 任意、最大5000文字

### タスク作成・編集

- タスク名: 必須、1-200文字
- 説明: 任意、最大5000文字
- 予定開始日: 任意、日付形式
- 予定終了日: 任意、日付形式、予定開始日より後
- 予定工数: 任意、正の整数
- 実績開始日: 任意、日付形式
- 実績終了日: 任意、日付形式、実績開始日より後
- 実績工数: 任意、正の整数

**注意:**
- UI層では基本的なフォーマットチェックと必須項目チェックのみ実施
- 詳細なビジネスルールチェックはApplication層のFluentValidationで実施

---

## レスポンシブ対応（将来実装）

### デスクトップ（1200px以上）
- プロジェクトカードを3列表示
- ガントチャートを横幅いっぱいに表示
- モーダルを中央に固定幅で表示

### タブレット（768px - 1199px）
- プロジェクトカードを2列表示
- ガントチャートをスクロール可能に
- モーダルを画面幅の80%で表示

### モバイル（767px以下）
- プロジェクトカードを1列表示
- ガントチャートを簡易リスト表示に切り替え
- モーダルを全画面表示

---

## アニメーションとトランジション

### モーダル表示
- フェードイン: 200ms
- スライドアップ: 200ms

### モーダル非表示
- フェードアウト: 150ms

### タイムライン移動
- ページ遷移: フェードイン/アウト 300ms

### トースト通知
- スライドダウン: 200ms
- 3秒後に自動消去（フェードアウト 300ms）

### ローディング状態
- スピナー表示: API呼び出し中
- スケルトンスクリーン: データ読み込み中（将来実装）

---

## アクセシビリティ（将来実装）

- キーボードナビゲーション対応
- ARIAラベルの適切な設定
- フォーカス表示の明確化
- 色だけでなく形状やテキストでも情報を伝える

---

## エラーハンドリング

### ユーザー入力エラー
- フィールドごとにエラーメッセージを表示（赤色）
- 送信ボタンを無効化（エラーがある場合）

### サーバーエラー
- トースト通知でエラーメッセージを表示
- 「再試行」ボタンを表示

### ネットワークエラー
- 接続が切れた場合の通知
- SignalR再接続の自動試行

---

## パフォーマンス最適化

### Blazor Server固有の最適化

**不要な再レンダリングの抑制:**
- `@key`ディレクティブで要素を識別
- `ShouldRender()`メソッドのオーバーライド
- `StateHasChanged()`の適切な使用

**SignalRの最適化:**
- 大きなデータは分割して送信
- debounce/throttleでイベント送信を制限

**仮想スクロール:**
- タスク数が多い場合の仮想化（将来実装）

---

## 開発優先順位

### Phase 1: 最小限のUI（MVP）
1. ✅ プロジェクト一覧表示
2. ✅ プロジェクト作成フォーム
3. プロジェクト詳細画面（基本レイアウト）
4. タスク一覧表示（シンプルなリスト）
5. タスク作成・編集モーダル
6. 基本的なスタイリング

### Phase 2: ガントチャート実装
1. ガントチャートコンポーネント
2. 予定と実績の視覚化
3. タスククリックで詳細モーダル
4. ドラッグ&ドロップでのタスク移動（将来）

### Phase 3: リワインド機能
1. タイムラインコントロール
2. 過去の状態表示
3. 過去表示モードのUI
4. 編集制限の実装

### Phase 4: UIブラッシュアップ
1. アニメーションの追加
2. トースト通知システム
3. レスポンシブ対応
4. アクセシビリティ向上
5. パフォーマンス最適化

---

## GitHubをベンチマークとした具体的なUI要素

### プロジェクトカード（GitHub Repositoryカード風）
- 角丸の白いカード
- ホバーで薄いシャドウ
- プロジェクト名を太字で大きく
- 説明はグレーのテキスト
- 統計情報（タスク数）は小さく右下に

### ボタンスタイル（GitHub風）
- Primary: 緑色の背景、白いテキスト
- Secondary: グレーのボーダー、白い背景
- Danger: 赤色の背景、白いテキスト（削除時）
- ホバーで少し暗くする

### モーダル（GitHub風）
- 中央に表示
- 背景を半透明の黒でオーバーレイ
- 白い背景、角丸
- ヘッダーにタイトルと[×]ボタン

### フォーム（GitHub風）
- シンプルなボーダー
- フォーカス時にブルーのボーダー
- ラベルは上に配置
- エラーは赤いテキストでフィールド下に表示

### タイムライン（GitHub Commitタイムライン風）
- 水平方向のコントロール
- シンプルな矢印ボタン
- 日付を中央に大きく表示
