# RewindPM

RewindPMは過去任意の時点にさかのぼってプロジェクトの振り返りを行うことができるプロジェクト管理ツールです。

## 機能仕様

ユーザーは複数のプロジェクトを管理できる
プロジェクトは次のプロパティを持つ
- プロジェクトID
- プロジェクト名
- 複数のタスク

タスクは次のプロパティを持つ
- 予定開始日
- 予定終了日
- 実績開始日
- 実績終了日
- 予定工数
- 実績工数
- ステータス
  - TODO
  - 進行中
  - レビュー中
  - 完了
- 説明
  - 説明は自由記述で行う

将来的にはタスク間の依存関係も作りたい

画面構成
- ホーム画面
  - プロジェクトが一覧できる
  - 各プロジェクトのプレビューが見られる
  - プロジェクトを選ぶとプロジェクト管理画面に遷移する
  - 新しいプロジェクトを追加できる
    - 追加時にプロジェクト名を決める
    - プロジェクトIDは自動で振る
- プロジェクト管理画面
  - タスクの一覧ができる
    - まずはガントチャート形式だけ
    - ガントチャート上でタスクを移動したりしたい
    - 予定と実績の差分を確認したい
    - GitHubのプロジェクト機能をイメージ
    - ドラッグアンドドロップでタスクの状況を変更できるようにする
  - タスクをクリックするとタスクの詳細がモーダルで確認できる
  - タスクの追加ができる
    - 追加はモーダルで行う
  - プロジェクト名の変更ができる
  - 特定の日付の状態に戻ることができる（リワインド機能）
    - 左右のトグルボタンで戻る日付を指定する
      - 初期表示では今日の状態を表示し、右ボタンは押せない
      - 左ボタンを押すと前回編集した日の最後の状態を表示する
    - 過去の日付の表示をしているときはタスクの編集はできないようにする
    - 

次のように編集履歴がある場合を考える。
1. 1月2日 10:00 
2. 1月2日 11:00 
3. 1月3日 11:00 
4. 1月3日 15:00 
5. 1月5日 10:00 
初期表示は最新の5の状態になる。
左ボタンを押すと4の状態になる。(1月4日は編集されなかったので表示しない)
もう一度左ボタンを押すと2の状態になる
ここで右ボタンを押すと4の状態になる
同じ日に複数回編集された場合でもその日の最後の状態だけを表示する。これは振り返りをする場合は日付単位で見れれば十分のはずで、一日の間に編集された内容までは興味がないはずだから。

## ブランチ戦略

mainとdevの二つのブランチを軸に開発を進める
マイルストーンごとにmainへのマージを行う

### マイルストーン

- 基盤構築
  - ドメイン層とイベントソーシングの基礎を動かす
    - プロジェクト構造の作る
    - ドメインモデルの実装
    - ドメインイベントの実装
    - イベントストアの実装
    - ユニットテストの実装
    - CI/CDの設定
    - タスクを作成してリプレイした内容を表示するだけの最小限のBlazorUI
- プロジェクト管理ができる最小限のUI
  - 基本的なCRUDができるUIを作る
    - プロジェクト一覧画面
    - プロジェクト作成機能
    - 簡易的なガントチャートでのタスク一覧の表示
    - タスク作成、編集モーダル
    - タスクステータス変更
    - Readmodelの作成
- リワインド機能
  - 過去の状態を表示するリワインド機能の実装
    - 過去の時点のタスク状態の表示
    - 日付の移動機能
- UIのブラッシュアップ
  - 暫定処置にしていた部分の仕上げ
    - UIとバックエンド全体で暫定にしていた部分を仕上げる

## 将来対応機能

- ユーザー管理機能
  - ログインや認証まではやらない方針
    - 疑似ログイン画面は作ってもいい
  - プロジェクトメンバー管理や担当者の設定などはやりたい
    - タスク一覧で担当者ごとのタスク一覧などが見られるビューも欲しい
- カンバン形式でのタスク管理
- リワインド機能で特定の日に飛べるようにしたい
  - カレンダーピッカー
- リワインド機能で月単位の移動ができるようにしたい
- プロジェクトの振り返り機能の強化
  - タスクの統計情報やバーンダウンチャートなどで進捗推移を確認できるようにしたい
- タスクの説明をmarkdownで記述して成形したものを表示できるようにする
  - blazorでできる？

## 技術スタック

- プラットフォーム： .Net 10
- フロントエンド： Blazor Server
- DB： SQLite, EF Core
- アーキテクチャ： CQRS, イベントソーシング, レイヤードアーキテクチャ（UI, Application, Domain, Infrastructureの4層を基準とする）
- テストフレームワーク： xUnit
- バリデーション： Fluent Validation(Applicationレイヤーで使用する)
- CQRSについて当面はMediatRのv12を使って実装する
  - ただし、最新版は有料になっているので、ある程度実装が進んだ段階で自作ライブラリに切り替えることも視野に入れておく。

方針：C#のベストプラクティスに準拠する